package edu.matc.controller;import edu.matc.entity.User;import edu.matc.entity.UserRoles;import edu.matc.persistence.GenericServiceImpl;import edu.matc.persistence.HibernateUtil;import edu.matc.persistence.IGenericService;import org.apache.log4j.Logger;import javax.servlet.RequestDispatcher;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.util.List;import java.util.Map;/** * Created on 11/8/17 at 3:58 PM * * @author nfenev */@WebServlet(        urlPatterns = {"/createNewUser"})public class CreateNewUser extends HttpServlet {    private final Logger logger = Logger.getLogger(this.getClass());    @Override    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        IGenericService<User> userService;        userService = new GenericServiceImpl<>(                User.class, HibernateUtil.getSessionFactory());        IGenericService<UserRoles> userRolesService;        userRolesService = new GenericServiceImpl<>(                UserRoles.class, HibernateUtil.getSessionFactory());        User newUser = new User();        UserRoles userRoles = new UserRoles();        String userName = req.getParameter("userName");        logger.info(userName);        String userPassword = req.getParameter("pwd");        logger.info(userPassword);        String userFirstName = req.getParameter("firstName");        logger.info(userFirstName);        String userLastName = req.getParameter("lastName");        logger.info(userLastName);        String jobTitle = req.getParameter("jobTitle");        logger.info(jobTitle);        newUser.setUserName(userName);        newUser.setUserPass(userPassword);        newUser.setFirstName(userFirstName);        newUser.setLastName(userLastName);        newUser.setJobTitle(jobTitle);        newUser = userService.save(newUser);        if (jobTitle.equalsIgnoreCase("manager")) {            userRoles.setRoleName("administrator");        } else {            userRoles.setRoleName("registered-user");        }        userRoles.setUserName(userName);        userRoles.setUserId(newUser);        userRolesService.save(userRoles);        RequestDispatcher dispatcher = req.getRequestDispatcher("/myEmployees");        dispatcher.forward(req, resp);    }}