package edu.matc.controller;import edu.matc.entity.StoreShifts;import edu.matc.entity.User;import edu.matc.entity.UserRoles;import edu.matc.persistence.GenericServiceImpl;import edu.matc.persistence.HibernateUtil;import edu.matc.persistence.IGenericService;import org.apache.log4j.Logger;import javax.servlet.RequestDispatcher;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.util.HashMap;import java.util.List;import java.util.Map;import static java.lang.Integer.parseInt;/** * Created on 11/8/17 at 5:11 PM * * @author nfenev */@WebServlet(        urlPatterns = {"/deleteUser"})public class DeleteUser extends HttpServlet {    private final Logger logger = Logger.getLogger(this.getClass());    @Override    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        IGenericService<User> userService;        userService = new GenericServiceImpl<>(                User.class, HibernateUtil.getSessionFactory());        IGenericService<UserRoles> userRolesService;        userRolesService = new GenericServiceImpl<>(                UserRoles.class, HibernateUtil.getSessionFactory());        String userId = req.getParameter("userId");        logger.info(userId);        //TODO Delete users availability        //Delete user from UserRoles        Map<String, Object> params = new HashMap<>();        String hqlQuery = "from UserRoles where users_id=" + userId;        List<UserRoles> returnedUser= userRolesService.query(hqlQuery, params);        userRolesService.delete(returnedUser.get(0));        //Delete user from User        User currentUser = userService.get(User.class, parseInt(userId));        userService.delete(currentUser);        RequestDispatcher dispatcher = req.getRequestDispatcher("/myEmployees");        dispatcher.forward(req, resp);    }}